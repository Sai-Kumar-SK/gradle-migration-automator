# Copilot Agent Mode Prompts

This file provides prompts for comprehensive Gradle migration using our chat participants. The migration now includes buildSrc scaffolding, libs.versions.toml generation, and modernization to Gradle version catalogs.

```
1. @transformationPlanner provideWorkflowInstructions
2. @gitAgent clone https://github.com/user/repo.git
3. @gradleParser analyze
4. @transformationPlanner executeStepByStepMigration
5. @gitAgent commit -m "Phase 1: Gradle migration - buildSrc + libs.versions.toml"
```

## Default Migration Prompt (Copy/Paste)
Use this single prompt in Copilot Agent Mode. It should automatically chain participants: `gitAgent → gradleParser → transformationPlanner → gitAgent(commit)`.

```
Modernize our Gradle project to use buildSrc and version catalogs using chat participants:

Inputs:
- gitUrl: <GIT_URL>
- baseBranch: <BASE_BRANCH>
- commitMessage: <COMMIT_MESSAGE>

Requirements:
- Chain participants: gitAgent → gradleParser → transformationPlanner → gitAgent(commit)
- Use ONLY the transformationPlanner participant - do NOT generate custom buildSrc content
- Apply patches exactly as generated by transformationPlanner (uses predefined templates)
- Preserve existing dependency declarations and Gradle DSL style
- Do not run Gradle tasks; I will run them in the terminal

Output:
- Applied patches with risk summary and validation steps

Strict Steps:
1. Root `settings.gradle`: replace entire file content with only `rootProject.name = '<repo-folder-name>'` and `include` lines; remove any `gradle.allprojects`, `repositories`, `publishing`, or other blocks.
2. `buildSrc` scaffolding: copy the entire `buildSrc` folder (including `settings.gradle`, `build.gradle`, and `common.lib.gradle`) from `.copilot/meta/buildSrc` into the repository, overwriting any existing files. Do NOT generate custom content.
3. Version catalog: generate `gradle/libs.versions.toml` by scanning ALL `build.gradle` files across the repository (not just parent).
4. Delete root `build.gradle`.
5. Subprojects: update each `build.gradle` to apply `plugins { id 'common.lib' }`, remove `repositories{}`, `publishing{}`, wrapper tasks, and `ext{}`/`apply from: 'versions.gradle'`; keep dependency declarations as-is (Phase 2 will convert to `libs.*`).
```

Replace values:
- `<GIT_URL>` e.g. `https://github.com/acme/gradle-repo.git`
- `<BASE_BRANCH>` e.g. `main`
- `<COMMIT_MESSAGE>` e.g. `feat: modernize to buildSrc and version catalogs`